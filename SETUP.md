# TelegramHabitsBot Configuration Guide

## üéØ –ì–ª–∞–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ Telegram

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram Web Apps API**
   - –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç Telegram Web Apps
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ user_id –æ—Ç Telegram
   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
   - –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º

2. **–û–±–Ω–æ–≤–ª—ë–Ω –±–æ—Ç (bot.py)**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `WebAppInfo` –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ URL
   - –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ Telegram
   - –í–º–µ—Å—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä

3. **–û–±–Ω–æ–≤–ª—ë–Ω –≤–µ–±-—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (index.html)**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Telegram Web Apps API
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞—Ö –≤ –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏

4. **–î–æ–±–∞–≤–ª–µ–Ω CORS (app.py)**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Telegram Web Apps

### üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

#### 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ .env

–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω `.env` —Ñ–∞–π–ª:
```
TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
```

#### 2Ô∏è‚É£ –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

**–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–π ngrok (https://ngrok.com/)
- –ò–ª–∏ Cloudflare Tunnel

**–î–ª—è production:**
- Render.com
- Railway.app
- Heroku (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–∞—Ç—É—Å–∞)
- –°–≤–æ–π VPS —Å nginx + SSL

#### 3Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL –≤ bot.py

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ (bot.py, ~58):**
```python
WEB_APP_URL = "https://YOUR_DOMAIN_OR_IP/app"
```

**–ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π URL:**
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å ngrok: `https://abcd1234.ngrok.io/app`
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä: `https://example.com/app`

#### 4Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

–û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–∞ –Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:
- `flask-cors` - –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ CORS

### üì± –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É "üì± –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –≤ Telegram
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ Telegram** (–Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!)
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è user_id –æ—Ç Telegram
4. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
5. –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞—Ö

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å ngrok

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: ngrok
ngrok http 5000
# –°–∫–æ–ø–∏—Ä—É–π URL –≤–∏–¥–∞ https://abc123.ngrok.io

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π bot.py (—Å—Ç—Ä–æ–∫–∞ ~58)
# –ó–∞–º–µ–Ω–∏ YOUR_DOMAIN_OR_IP –Ω–∞ abc123.ngrok.io

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: Flask app
python app.py

# –¢–µ—Ä–º–∏–Ω–∞–ª 3: Bot
python bot.py

# –í Telegram –Ω–∞–π–¥–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å /start
```

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π HTTPS (Telegram —Ç—Ä–µ–±—É–µ—Ç)
- –ù–µ –ø—É–±–ª–∏–∫—É–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–∞ production –∏—Å–ø–æ–ª—å–∑—É–π –Ω–∞–¥—ë–∂–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥

### üìä API endpoints

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–∞–∫ –∂–µ, –Ω–æ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç:
- CORS –∑–∞–ø—Ä–æ—Å—ã
- Telegram Web Apps
- –ú–æ–±–∏–ª—å–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã

```
GET  /api/habits              - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫–∏
POST /api/add-habit           - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É
POST /api/mark-completed      - –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
POST /api/delete-habit        - –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É
GET  /api/statistics          - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```

### ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Web Apps

- ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Telegram (–Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
- ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å Telegram
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–∞—á–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

### üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Telegram:**
- –ü—Ä–æ–≤–µ—Ä—å, –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –ª–∏ HTTPS (http –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω: `https://—Ç–≤–æ–π_url/app`
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Flask –∑–∞–ø—É—â–µ–Ω

**User ID –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è:**
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `web_app=WebAppInfo(url=...)`
- –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
- –ü–æ–ø—Ä–æ–±—É–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `/start` –∑–∞–Ω–æ–≤–æ

**–û—à–∏–±–∫–∞ CORS:**
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `flask-cors`
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `CORS(app)` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- Telegram Bot API: https://core.telegram.org/bots/api
- Telegram Web Apps: https://core.telegram.org/bots/webapps
- Flask: https://flask.palletsprojects.com/
